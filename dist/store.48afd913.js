var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},e={},o={},c=t.parcelRequirefc9c;null==c&&((c=function(t){if(t in e)return e[t].exports;if(t in o){var c=o[t];delete o[t];var n={id:t,exports:{}};return e[t]=n,c.call(n.exports,n,n.exports),n.exports}var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(t,e){o[t]=e},t.parcelRequirefc9c=c);var n=c("6QD2Y"),r=c("etBjH");r=c("etBjH");var a=c("1tHc5");const i=document.getElementById("stockPrint"),d=document.getElementById("categoryFilter");let s,u=[],l=[];async function p(){try{const t=await async function(t){try{const e=r.collection(t,"products"),{docs:o}=await r.getDocs(e);return o.map((t=>({...t.data(),id:t.id})))}catch(t){console.log(t)}}(n.db);i.innerHTML="",t.forEach((t=>{f(t)})),u=t}catch(t){console.log(t)}}function f(t){const e=document.createElement("a");e.className="iproduct",e.setAttribute("href",`./product.html?id=${t.id}`);const o=t.product_img?t.product_img[0]:"https://firebasestorage.googleapis.com/v0/b/rosetashop-157e2.appspot.com/o/products%2Fimages%2Fimg_general_placeholder.jpg?alt=media&token=f88f5f6f-7729-4680-94be-2d9b49f82bd4",{product_name:c,product_price:a,product_reference:d,product_color:u,product_colection:p,product_category:f}=t,g=l.some((e=>e.id===t.id))?'<button class="iproduct__button" disabled> Producto añadido </button>':'<button class="iproduct__button"> Añadir a carrito </button>';e.innerHTML=`\n    <img class="iproduct__img" src="${o}">\n    <div class="iproduct__info">\n        <h1>${c}</h1>\n        <h2>$${a}</h2>\n    </div>\n    <h4 class="iproduct__color">${u}</h4>\n    ${g}\n    `,i.appendChild(e);const h=e.querySelector(".iproduct__button");h.addEventListener("click",(async e=>{e.preventDefault(),l.push({...t,count:1}),async function(){localStorage.setItem("cart",JSON.stringify(l))}(),s&&await async function(t,e,o){try{await r.setDoc(r.doc(t,"cart",e),{cart:o})}catch(t){console.log(t)}}(n.db,s.uid,l),h.setAttribute("disabled",!0),h.innerText="Producto añadido"}))}d.addEventListener("change",(t=>{!function(){const t=d.value,e=u.filter((e=>e.product_category===t));0===e.length&&p(),i.innerHTML="",e.forEach((t=>{f(t)}))}()})),p(),a.onAuthStateChanged(n.auth,(async t=>{p()}));
//# sourceMappingURL=store.48afd913.js.map
