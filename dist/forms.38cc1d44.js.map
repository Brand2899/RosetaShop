{"mappings":"oeACA,IAAAA,EAAAC,EAAA,SCDAC,EAAAD,EAAA,sBAqBAE,eAAeC,EAAaC,EAASC,EAAc,IAC/C,IAOI,OANeA,EAAYC,KAAIJ,MAAOK,IAClC,MAAMC,QAZlBN,eAAoCE,EAASG,GACzC,IACI,MAAME,EAAaC,EAAAC,IAAIP,EAAS,mBAAmBG,EAAMK,QACzD,aAAaF,EAAAG,YAAYJ,EAAYF,GACvC,MAAOO,GACLC,QAAQC,IAAIF,IAOqBG,CAAqBb,EAASG,GAE3D,OAAOG,EAAAQ,eAAeR,EAAAC,IAAIP,EAASI,EAAeG,IAAIQ,cAI5D,MAAOL,GACLC,QAAQC,IAAIF,ID3BpB,MAAMM,EAAOC,SAASC,eAAe,QACnBD,SAASC,eAAe,aAEhCC,iBAAiB,SAASrB,MAAOY,IAGvC,GAFAA,EAAEU,iBAE6B,KAA5BJ,EAAKK,aAAaC,OAA6C,KAA7BN,EAAKO,cAAcD,OAAgD,aAAhCN,EAAKQ,iBAAiBF,OAAyD,aAAjCN,EAAKS,kBAAkBH,OAAyD,KAAjCN,EAAKU,kBAAkBJ,OAA6C,KAA7BN,EAAKW,cAAcL,MAE3N,YADAM,MAAM,+BAIV,MAAMP,EAAeL,EAAKK,aAAaC,MACjCC,EAAgBP,EAAKO,cAAcD,MACnCrB,EAAce,EAAKf,YAAY4B,MAC/BL,EAAmBR,EAAKQ,iBAAiBF,MACzCG,EAAoBT,EAAKS,kBAAkBH,MAC3CI,EAAoBV,EAAKU,kBAAkBJ,MAC3CK,EAAgBX,EAAKW,cAAcL,MAEzC,IAAIQ,EAAU,GAEd,GAAG7B,EAAY8B,OAAO,CAClB,MAAMC,QAAejC,EAAaJ,EAAAK,QAAS,IAAIC,IAC/C6B,QAAgBG,QAAQC,IAAIF,GAGhC,MAAMG,EAAa,cACfd,gBACAE,EACAtB,YAAa6B,mBACbN,oBACAC,oBACAC,gBACAC,SClCR7B,eAAiCsC,EAAIC,GACjC,UACUxC,EAAAyC,OAAOzC,EAAA0C,WAAWH,EAAI,YAAaC,GAE3C,MAAO3B,GACLC,QAAQC,IAAIF,IDgCV8B,CAAkB7C,EAAAyC,GAAID","sources":["js/forms.js","js/scripts/formsScript.js"],"sourcesContent":["// Import the functions you need from the SDKs you need\r\nimport { storage, db } from \"./app\";\r\nimport { addProductToStock, uploadImages } from \"./scripts/formsScript\";\r\n\r\nconst form = document.getElementById(\"form\");\r\nconst bn_upload = document.getElementById(\"bn_upload\");\r\n\r\nbn_upload.addEventListener(\"click\", async (e) =>{\r\n    e.preventDefault();\r\n\r\n    if(form.product_name.value === \"\" || form.product_price.value === \"\" || form.product_category.value === \"ct_blank\" || form.product_colection.value === \"cl_blank\" || form.product_reference.value === \"\" || form.product_color.value === \"\"){\r\n        alert(\"Hay al menos un campo vacío\");\r\n        return;\r\n    }\r\n\r\n    const product_name = form.product_name.value;\r\n    const product_price = form.product_price.value;\r\n    const product_img = form.product_img.files;\r\n    const product_category = form.product_category.value;\r\n    const product_colection = form.product_colection.value;\r\n    const product_reference = form.product_reference.value;\r\n    const product_color = form.product_color.value;\r\n\r\n    let gallery = [];\r\n\r\n    if(product_img.length){\r\n        const images = await uploadImages(storage, [...product_img]); \r\n        gallery = await Promise.all(images);\r\n    }\r\n \r\n    const newProduct = {\r\n        product_name,\r\n        product_price,\r\n        product_img: gallery,\r\n        product_category,\r\n        product_colection,\r\n        product_reference,\r\n        product_color\r\n    };\r\n\r\n    await addProductToStock(db, newProduct);\r\n});","import { addDoc, collection } from \"firebase/firestore\";\r\nimport { ref, uploadBytes,getDownloadURL } from \"firebase/storage\";\r\n\r\nasync function addProductToStock(db, product){\r\n    try{\r\n        await addDoc(collection(db, \"products\"), product);\r\n        //console.log(\"productos añadidos!\")\r\n    } catch (e) {\r\n        console.log(e);\r\n    }\r\n}\r\n\r\nasync function imageUploadReference(storage, image){\r\n    try{\r\n        const storageRef = ref(storage, `products/images/${image.name}`);\r\n        return await uploadBytes(storageRef, image);\r\n    } catch (e){\r\n        console.log(e);\r\n    }\r\n}\r\n\r\nasync function uploadImages(storage, product_img = []){\r\n    try{\r\n        const images = product_img.map(async (image) => {\r\n            const imageReference = await imageUploadReference(storage, image);\r\n            \r\n            return getDownloadURL(ref(storage, imageReference.ref.fullPath));\r\n        });\r\n\r\n        return images;\r\n    } catch (e){\r\n        console.log(e);\r\n    }\r\n}\r\n\r\nexport{\r\n    addProductToStock,\r\n    uploadImages\r\n}"],"names":["$6QD2Y","parcelRequire","$etBjH","async","$3421871defdd7a4f$export$633f5b6169e2b910","storage","product_img","map","image","imageReference","storageRef","$aYguL","ref","name","uploadBytes","e","console","log","$3421871defdd7a4f$var$imageUploadReference","getDownloadURL","fullPath","$643807a8b3d50fb4$var$form","document","getElementById","addEventListener","preventDefault","product_name","value","product_price","product_category","product_colection","product_reference","product_color","alert","files","gallery","length","images","Promise","all","newProduct","db","product","addDoc","collection","$3421871defdd7a4f$export$522710b75468aa4f"],"version":3,"file":"forms.38cc1d44.js.map"}